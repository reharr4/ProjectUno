<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <!-- HERE MAP CDN's-->
    <link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.0/mapsjs-ui.css?dp-version=1549984893" />
    <script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-core.js"></script>
    <script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-service.js"></script>
    <script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-ui.js"></script>
    <script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-mapevents.js"></script>

    <script type="text/javascript" src="assets/maps.js"></script>


</head>

<body>
    <div id="map" style="width: 100%; height: 600px; background: grey" />
    <script type="text/javascript" charset="UTF-8">

        // ----- INITIALIZE MAP -----

        //Step 1: initialize communication with the platform
        var platform = new H.service.Platform({
            "app_id": "k3EFdG3OsNPMzswnSPnJ",
            "app_code": "649NiziJD5JZ3hGvJqbQMg",
            useHTTPS: true
        });
        var pixelRatio = window.devicePixelRatio || 1;
        var defaultLayers = platform.createDefaultLayers({
            tileSize: pixelRatio === 1 ? 256 : 512,
            ppi: pixelRatio === 1 ? undefined : 320
        });

        //Step 2: initialize a map
        var map = new H.Map(document.getElementById('map'),
            defaultLayers.normal.map, { pixelRatio: pixelRatio });

        // Moves the map to display over Nashville
        function moveMapToNashville(map) {
            map.setCenter({ lng: -86.7876, lat: 36.1565 });
            map.setZoom(13.5);
        }

        //Step 3: make the map interactive
        // MapEvents enables the event system
        // Behavior implements default interactions for pan/zoom (also on mobile touch environments)
        var behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));

        // Create the default UI components
        var ui = H.ui.UI.createDefault(map, defaultLayers);

        // Now use the map as required...
        moveMapToNashville(map);

        // ----- Script for creating circles around neighborhoods -----
        function setUpCustomZooming(map) {
            // create several circles based on neighborhoods

            var downtown = new H.map.Circle(
                new H.map.Point(36.158879, -86.782085), //center
                11703, // Radius proportional to 390,113 population
                { style: { fillColor: 'rgba(0, 255, 221, 0.66)' } }
            );
            var midtown = new H.map.Circle(
                new H.geo.Point(36.150333, -86.795989), //center
                75090, // Radius proportional to 2.503 million population
                { style: { fillColor: 'rgba(0, 255, 221, 0.66)' } }
            );
            var fivePoints = new H.map.Circle(
                new H.geo.Point(36.177495, -86.751502), //center
                81570, // Radius proportional to 2.719 million population
                { style: { fillColor: 'rgba(0, 221, 255, 0.66)' } }
            );

            // define maximum zoom level for each circle
            // downtown.setData({ maxZoom: 5 });
            // midtown.setData({ maxZoom: 5 });
            // fivePoints.setData({ maxZoom: 5 });

            // create container for objects
            var container = new H.map.Group({
                objects: [downtown, midtown, fivePoints]
            });

            // use the event delegation to handle 'tap' events on objects
            // container.addEventListener('tap', function (evt) {
            //     var target = evt.target;
            //     // retrieve maximum zoom level
            //     var maxZoom = target.getData().maxZoom;
            //     // calculate best camera data to fit object's bounds
            //     var cameraData = map.getCameraDataForBounds(target.getBounds());

            //     // we set new zoom level taking into acount 'maxZoom' value
            //     map.setZoom(Math.min(cameraData.zoom, maxZoom), true);
            //     map.setCenter(cameraData.position, true);
            // });

            // add objects to the map
            map.addObject(downtown);
        }

        // ----- Script for placing marker on map -----
        // Create a marker image
        var icon = new H.map.Icon("assets/beer.png");

        // Location for marker
        var marker = new H.map.Marker({ lng: -86.74898, lat: 36.1778 }, { icon: icon });

        // Add marker on map
        map.addObject(marker);


    </script>
</body>

</html>